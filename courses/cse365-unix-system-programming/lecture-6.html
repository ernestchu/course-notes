<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lecture 6 | Ernie's course notes</title>
    <meta name="description" content="Thank you for visiting my course notes">
    <link rel="stylesheet" href="/course-notes/assets/style.5bbe01c9.css">
    <link rel="modulepreload" href="/course-notes/assets/app.b33521bb.js">
    <link rel="modulepreload" href="/course-notes/assets/courses_cse365-unix-system-programming_lecture-6.md.c1316c1d.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-ca9ccb7e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ca9ccb7e data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-a35e6f52><div class="container" data-v-a35e6f52><div class="VPNavBarTitle has-sidebar" data-v-a35e6f52 data-v-d5925166><a class="title" href="/course-notes/" data-v-d5925166><!--[--><!--]--><!----><!--[-->Ernie&#39;s course notes<!--]--><!--[--><!--]--></a></div><div class="content" data-v-a35e6f52><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-a35e6f52 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/course-notes/courses/cse350-computer-network/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->CSE350<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/course-notes/courses/cse365-unix-system-programming/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->CSE365<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/course-notes/courses/cse360-design-and-implementation-of-compiler/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->CSE360<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/course-notes/courses/cse491-network-application-programming/" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->CSE491<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-a35e6f52 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-a3e7452b data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-a35e6f52 data-v-e89b88d7 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e89b88d7><div class="item appearance" data-v-e89b88d7><p class="label" data-v-e89b88d7>Appearance</p><div class="appearance-action" data-v-e89b88d7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-e89b88d7 data-v-968780f1 data-v-086e8519><span class="check" data-v-086e8519><span class="icon" data-v-086e8519><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-968780f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-968780f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-a35e6f52 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-ca9ccb7e data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-ca9ccb7e data-v-f332cb62><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f332cb62><span class="visually-hidden" id="sidebar-aria-label" data-v-f332cb62> Sidebar Navigation </span><!--[--><div class="group" data-v-f332cb62><section class="VPSidebarGroup" data-v-f332cb62 data-v-2976c796><div class="title" data-v-2976c796><h2 class="title-text" data-v-2976c796>CSE365 Unix System Programming</h2><div class="action" data-v-2976c796><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-2976c796><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-2976c796><!--[--><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Introduction</span><!----><!--]--><!----></a><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/lecture-1.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Lecture 1</span><!----><!--]--><!----></a><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/lecture-2.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Lecture 2</span><!----><!--]--><!----></a><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/lecture-3.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Lecture 3</span><!----><!--]--><!----></a><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/lecture-4.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Lecture 4</span><!----><!--]--><!----></a><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/lecture-5.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Lecture 5</span><!----><!--]--><!----></a><a class="VPLink link link active" href="/course-notes/courses/cse365-unix-system-programming/lecture-6.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Lecture 6</span><!----><!--]--><!----></a><a class="VPLink link link" href="/course-notes/courses/cse365-unix-system-programming/midterm-review.html" data-v-2976c796 data-v-f7e544fc data-v-3c355974><!--[--><span class="link-text" data-v-f7e544fc>Midtern Review</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-ca9ccb7e data-v-407bd980><div class="VPDoc has-sidebar has-aside" data-v-407bd980 data-v-f0af2311><div class="container" data-v-f0af2311><div class="aside" data-v-f0af2311><div class="aside-curtain" data-v-f0af2311></div><div class="aside-container" data-v-f0af2311><div class="aside-content" data-v-f0af2311><div class="VPDocAside" data-v-f0af2311 data-v-aea49c31><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-aea49c31 data-v-a3de185c><div class="content" data-v-a3de185c><div class="outline-marker" data-v-a3de185c></div><div class="outline-title" data-v-a3de185c>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-a3de185c><span class="visually-hidden" id="doc-outline-aria-label" data-v-a3de185c> Table of Contents for current page </span><ul class="root" data-v-a3de185c><!--[--><li data-v-a3de185c><a class="outline-link" href="#sed-basic" data-v-a3de185c>sed Basic</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#substitute" data-v-a3de185c>Substitute</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#more-sed" data-v-a3de185c>More sed</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#sed-in-depth" data-v-a3de185c>sed In Depth</a><!----></li><li data-v-a3de185c><a class="outline-link" href="#more-sed-actions" data-v-a3de185c>More sed Actions</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-aea49c31></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f0af2311><div class="content-container" data-v-f0af2311><!--[--><!--]--><main class="main" data-v-f0af2311><div style="position:relative;" class="vp-doc _course-notes_courses_cse365-unix-system-programming_lecture-6" data-v-f0af2311><div><h1 id="lecture-6" tabindex="-1">Lecture 6 <a class="header-anchor" href="#lecture-6" aria-hidden="true">#</a></h1><h2 id="sed-basic" tabindex="-1"><code>sed</code> Basic <a class="header-anchor" href="#sed-basic" aria-hidden="true">#</a></h2><p><code>sed</code> = <strong>S</strong>tream <strong>Ed</strong>itor. <code>sed</code> uses regex, just like <code>grep</code>. Each line of the input file is processed individually by your <code>sed</code> command.</p><p>You need to tell <code>sed</code>:</p><ol><li>A type of action to perform when matched</li><li>A pattern that you are looking for</li><li>The exact details of the action</li><li>Some flags (not the command-line flags such as <code>sed -n</code>)</li></ol><p>For example</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/exersice/exercise/g</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;">#    │ │        │        │</span></span>
<span class="line"><span style="color:#676E95;">#    │ │        │        └ Flag</span></span>
<span class="line"><span style="color:#676E95;">#    │ │        └ Detail</span></span>
<span class="line"><span style="color:#676E95;">#    │ └ Pattern</span></span>
<span class="line"><span style="color:#676E95;">#    └ Action</span></span>
<span class="line"><span style="color:#676E95;">#</span></span>
<span class="line"><span style="color:#676E95;"># In the s (substitution) action, the detail is</span></span>
<span class="line"><span style="color:#676E95;"># a fixed-string to be substituted with</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Separator</p><p>In the example above, the symbol <code>/</code> separating four areas is called separator. A separator is specified by the <strong>character succeeding</strong> the action (which is <code>s</code> above). You can use symbols that other than <code>/</code> as separators. For example</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s,exersice,exercise,g</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div></div><h3 id="useful-sed-command-line-flags" tabindex="-1">Useful <code>sed</code> command-line flags <a class="header-anchor" href="#useful-sed-command-line-flags" aria-hidden="true">#</a></h3><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>-n</code></td><td>No auto-printing of the pattern space</td></tr><tr><td><code>-e</code></td><td>Execute the command sequence specified in the argument following this flag</td></tr><tr><td><code>-f</code></td><td>Obtain a command sequence from a file</td></tr></tbody></table><h2 id="substitute" tabindex="-1">Substitute <a class="header-anchor" href="#substitute" aria-hidden="true">#</a></h2><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">s/</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">pattern</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">/</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">replacement</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">/</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">flags</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>Where the <code>pattern</code> is a regex and the <code>replacement</code> is a fixed-string</p><h3 id="common-substitute-flags" tabindex="-1">Common substitute flags <a class="header-anchor" href="#common-substitute-flags" aria-hidden="true">#</a></h3><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td><code>g</code></td><td>Replace all instances of the matches, otherwise <code>sed</code> defaults to the first instance only.</td></tr><tr><td><code>number</code></td><td>Replace only the n<sub>th</sub> instance specified by the <code>number</code>.</td></tr><tr><td><code>p</code></td><td>Print the line if a successful substitution is done. If <code>g</code> is used, print the line after the final substitution.</td></tr></tbody></table><h4 id="flag-g" tabindex="-1">Flag <code>g</code> <a class="header-anchor" href="#flag-g" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat aab_cab_B</span></span>
<span class="line"><span style="color:#A6ACCD;">aab</span></span>
<span class="line"><span style="color:#A6ACCD;">cab</span></span>
<span class="line"><span style="color:#A6ACCD;">B</span></span>
<span class="line"><span style="color:#A6ACCD;">% cat aab_cab_B </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/[ab]/X/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Xab</span></span>
<span class="line"><span style="color:#A6ACCD;">cXb</span></span>
<span class="line"><span style="color:#A6ACCD;">B</span></span>
<span class="line"><span style="color:#A6ACCD;">% cat aab_cab_B </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/[ab]/X/g</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">XXX</span></span>
<span class="line"><span style="color:#A6ACCD;">cXX</span></span>
<span class="line"><span style="color:#A6ACCD;">B</span></span>
<span class="line"></span></code></pre></div><h4 id="flag-number" tabindex="-1">Flag <code>number</code> <a class="header-anchor" href="#flag-number" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat aab_cab_B </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/[ab]/X/3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">aaX</span></span>
<span class="line"><span style="color:#A6ACCD;">cab</span></span>
<span class="line"><span style="color:#A6ACCD;">B</span></span>
<span class="line"></span></code></pre></div><h4 id="flag-p" tabindex="-1">Flag <code>p</code> <a class="header-anchor" href="#flag-p" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat aab_cab_B </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/[ab]/X/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Xab</span></span>
<span class="line"><span style="color:#A6ACCD;">Xab</span></span>
<span class="line"><span style="color:#A6ACCD;">cXb</span></span>
<span class="line"><span style="color:#A6ACCD;">cXb</span></span>
<span class="line"><span style="color:#A6ACCD;">B</span></span>
<span class="line"></span></code></pre></div><p>The matched line are duplicate, use <code>p</code> with command-line flag <code>-n</code> instead.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat aab_cab_B </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed -n </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/[ab]/X/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Xab</span></span>
<span class="line"><span style="color:#A6ACCD;">cXb</span></span>
<span class="line"></span></code></pre></div><h3 id="reinsertion" tabindex="-1">Reinsertion <a class="header-anchor" href="#reinsertion" aria-hidden="true">#</a></h3><h4 id="reinsert-all-of-the-matched" tabindex="-1">Reinsert all of the matched <a class="header-anchor" href="#reinsert-all-of-the-matched" aria-hidden="true">#</a></h4><p>You can reinsert all of the matched pattern with <code>&amp;</code>, for example</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#%^&amp;12345Hello World123454321</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/[A-Za-z]\{1,\}/\nFound a word: &amp;\n/g</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#676E95;">#%^&amp;12345</span></span>
<span class="line"><span style="color:#A6ACCD;">Found a word: Hello</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">Found a word: World</span></span>
<span class="line"><span style="color:#A6ACCD;">123454321</span></span>
<span class="line"></span></code></pre></div><h3 id="reinsert-certain-groups" tabindex="-1">Reinsert certain groups <a class="header-anchor" href="#reinsert-certain-groups" aria-hidden="true">#</a></h3><p>Same as <code>grep</code>, <code>\(\)</code> and <code>\number</code> can be used on <code>sed</code>.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat file </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/\( p[^ ]*\)\( [^p][^ ]*\)*\( p[^ ]*\)/\1\3/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Joe paid people</span></span>
<span class="line"><span style="color:#A6ACCD;">I paid people</span></span>
<span class="line"></span></code></pre></div><h3 id="build-grep-with-sed" tabindex="-1">Build <code>grep</code> with <code>sed</code> <a class="header-anchor" href="#build-grep-with-sed" aria-hidden="true">#</a></h3><h4 id="_1-match" tabindex="-1">1 match <a class="header-anchor" href="#_1-match" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;">#!/bin/tcsh</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;"># == 2 </span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    sed -n </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q/&amp;/p</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">2</span></span>
<span class="line"><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">    sed -n </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q/&amp;/p</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">endif</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-matches" tabindex="-1">2 matches <a class="header-anchor" href="#_2-matches" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;">#!/bin/tcsh</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;"># == 2 </span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    sed -n </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q/&amp;/2p</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">2</span></span>
<span class="line"><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">    sed -n </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q/&amp;/2p</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">endif</span></span>
<span class="line"></span></code></pre></div><p>or</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#676E95;">#!/bin/tcsh</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;"># == 2 </span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    sed -n </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q.*</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q/&amp;/p</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">2</span></span>
<span class="line"><span style="color:#89DDFF;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">    sed -n </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q.*</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#C3E88D;">:q/&amp;/p</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">endif</span></span>
<span class="line"></span></code></pre></div><h2 id="more-sed" tabindex="-1">More <code>sed</code> <a class="header-anchor" href="#more-sed" aria-hidden="true">#</a></h2><h3 id="nested-groups" tabindex="-1">Nested groups <a class="header-anchor" href="#nested-groups" aria-hidden="true">#</a></h3><p>When backreferencing, the group numbers are defined in the order of their <code>\(</code> symbol, i.e., where they begin. Consquently, the outer groups come before the inner groups.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat file </span></span>
<span class="line"><span style="color:#A6ACCD;">the quick brown fox jumped over the lazy dog</span></span>
<span class="line"><span style="color:#A6ACCD;">% cat file </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s,\(the \([a-z]* \)*the\),&quot;\1&quot;,</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the quick brown fox jumped over the</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> lazy dog</span></span>
<span class="line"><span style="color:#A6ACCD;">% cat file </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s,\(the \([a-z]* \)*the\),&quot;\2&quot;,</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">over </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> lazy dog</span></span>
<span class="line"></span></code></pre></div><p>However, if a group was used with the <code>*</code>, regex only backreferences the last match. As you can see above, only <code>over</code> was captured.</p><p>If we want all 5 or those word (quick brown fox jump over) to be captured, the <code>*</code> has to be the left of the <code>\)</code>, but we the <code>*</code> to be right in order to capture the repetitions! The solution to this is to add the third group.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat file </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s,\(the \(\([a-z]* \)*\)the\),&quot;\2&quot;,</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">quick brown fox jumped over </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> lazy dog</span></span>
<span class="line"></span></code></pre></div><h3 id="multiple-sed-commands" tabindex="-1">Multiple <code>sed</code> commands <a class="header-anchor" href="#multiple-sed-commands" aria-hidden="true">#</a></h3><p>Running multiple <code>sed</code> commands using the semicolon. Let&#39;s say we want to substitute <strong>skiing</strong> with <strong>hiking</strong> and substitute <strong>hiking</strong> with <strong>biking</strong>.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Amy enjoys hiking and Ben enjoys skiing</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/skiing/hiking/g; s/hiking/biking/g</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Amy enjoys biking and Ben enjoys biking</span></span>
<span class="line"></span></code></pre></div><p>Not quite what we want... We was expecting something like</p><p>Amy enjoys biking and Ben enjoys <span style="color:red;">hiking</span></p><p>Let&#39;s see what happend.</p><ol><li><code>sed</code> reads in <code>Amy enjoys hiking and Ben enjoys skiing</code> and execute the first substitution command and <strong>cache</strong> the result in the <strong>pattern space</strong>, which is, <code>Amy enjoys hiking and Ben enjoys hiking</code></li><li>Then the second substitution command is executed on the line in the pattern space, and the result is, <code>Amy enjoys biking and Ben enjoys biking</code></li><li>The result is then written to standard out.</li></ol><p>So we saw that the subsequent commands doesn&#39;t give what we want. We should use a single command instead.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Amy enjoys hiking and Ben enjoys skiing</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/hiking\(.*\)biking/biking\1hiking/g</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Amy enjoys hiking and Ben enjoys skiing</span></span>
<span class="line"></span></code></pre></div><h3 id="run-sed-command-from-files" tabindex="-1">Run <code>sed</code> command from files <a class="header-anchor" href="#run-sed-command-from-files" aria-hidden="true">#</a></h3><p>Use <code>-f</code> command-line flag to specify a <code>sed</code> command file. Let&#39;s see different ways to do this.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> cat Way1 </span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> ----- </span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> cat Way2 </span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> ----- </span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> cat Way3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">s/A/a/</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">s/B/b/</span></span>
<span class="line"><span style="color:#A6ACCD;">-----</span></span>
<span class="line"><span style="color:#A6ACCD;">s/A/a/</span></span>
<span class="line"><span style="color:#A6ACCD;">s/B/b/</span></span>
<span class="line"><span style="color:#A6ACCD;">-----</span></span>
<span class="line"><span style="color:#676E95;">#!/usr/bin/sed -f</span></span>
<span class="line"><span style="color:#A6ACCD;">s/A/a/</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">s/B/b/</span></span>
<span class="line"></span></code></pre></div><p>Use them</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat F</span></span>
<span class="line"><span style="color:#A6ACCD;">ABC</span></span>
<span class="line"><span style="color:#A6ACCD;">% sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/A/a/;s/B/b/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> F</span></span>
<span class="line"><span style="color:#A6ACCD;">abC</span></span>
<span class="line"><span style="color:#A6ACCD;">% sed -f Way1 </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> F</span></span>
<span class="line"><span style="color:#A6ACCD;">abC</span></span>
<span class="line"><span style="color:#A6ACCD;">% sed -f Way2 </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> F</span></span>
<span class="line"><span style="color:#A6ACCD;">abC</span></span>
<span class="line"><span style="color:#A6ACCD;">% ./Way3 </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> F</span></span>
<span class="line"><span style="color:#A6ACCD;">abC</span></span>
<span class="line"></span></code></pre></div><h4 id="exercise" tabindex="-1">Exercise <a class="header-anchor" href="#exercise" aria-hidden="true">#</a></h4><p>We&#39;ve learned so much! Make a sed command file should not be difficult, yet let&#39;s make it even more interesting.</p><p>Problem: what the output?</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> \#\!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/usr/bin/sed -f%s/s/@/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">%</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tee sedFile\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/s/@/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">\</span></span>
<span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> cat sedFile</span></span>
<span class="line"></span></code></pre></div><p>Hint: In order to use newline in C-shell, I&#39;ve used <code>tr</code> to do the trick.</p><div class="tip custom-block"><p class="custom-block-title">Answer</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">#!/u@r/bin/sed -f</span></span>
<span class="line"><span style="color:#A6ACCD;">@/s/@/</span></span>
<span class="line"><span style="color:#A6ACCD;">#!/usr/bin/sed -f</span></span>
<span class="line"><span style="color:#A6ACCD;">s/s/@/</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>You got it?</p></div><p>Now that we&#39;ve created the <code>sed</code> command file, since <code>sed</code> itself is an executable, we can run it directly.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% chmod +x sedFile</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> sss </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> ./sedFile</span></span>
<span class="line"><span style="color:#A6ACCD;">@ss</span></span>
<span class="line"></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Pitfall: Why Doesn&#39;t My sed Script Work?</p><p>Some wrong examples you should avoid</p><ol><li>Forget to add <code>-f</code> at the first line, e.g. <code>#!/usr/bin/sed</code></li><li><code>-f</code> isn&#39;t at the end of the first line, e.g. <code>#!/usr/bin/sed -fn</code><ul><li>Use <code>-nf</code> instead</li></ul></li></ol></div><h2 id="sed-in-depth" tabindex="-1"><code>sed</code> In Depth <a class="header-anchor" href="#sed-in-depth" aria-hidden="true">#</a></h2><p>The implementation of <code>sed</code></p><h3 id="pseudo-code" tabindex="-1">Pseudo code <a class="header-anchor" href="#pseudo-code" aria-hidden="true">#</a></h3><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#89DDFF;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!</span><span style="color:#A6ACCD;">EOF</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># step 1.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Load the pattern space with the next line from STDIN</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># step 2.</span></span>
<span class="line"><span style="color:#A6ACCD;">    foreach </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">subcommand</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> within </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">this sed command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Use the pattern space as input to the sibcommand</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Do the subcommand, possibly printing to STDOUT</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Put the result into the pattern space</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;"># step 3.</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Write the pattern space to STDOUT (if no -n flag)</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="flow-chart" tabindex="-1">Flow chart <a class="header-anchor" href="#flow-chart" aria-hidden="true">#</a></h3><p><img src="/course-notes/assets/sed-flow.d337577d.svg" alt="sed-flow"></p><h3 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-hidden="true">#</a></h3><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># printed at step 3, due to no -n</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, due to the p flag for s subcommand</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 3, no -n</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed -n </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, due to the p flag</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/; s/C/c/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b c </span><span style="color:#676E95;"># step 3, no -n</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/p; s/C/c/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, p flag, notice the capital C. The second subcommand has not executed yet</span></span>
<span class="line"><span style="color:#A6ACCD;">A b c </span><span style="color:#676E95;"># step 3, no -n</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed -n </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/p; s/C/c/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, p flag</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/p; s/C/c/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, 1st iteration</span></span>
<span class="line"><span style="color:#A6ACCD;">A b c </span><span style="color:#676E95;"># step 2, 2nd iteration</span></span>
<span class="line"><span style="color:#A6ACCD;">A b c </span><span style="color:#676E95;"># step 3, no -n</span></span>
<span class="line"></span></code></pre></div><p>What if you want to use double p, <code>pp</code></p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed -n </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/pp; s/C/c/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">sed: -e expression </span><span style="color:#676E95;">#1, char 8: multiple `p&#39; options to `s&#39; command</span></span>
<span class="line"></span></code></pre></div><p>You can&#39;t do that! Thee <code>s</code> command cannot take repeated flags. However, there is a standalone command <code>p</code>, which flush the pattern space to the standard out.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">A B C</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed -n </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/B/b/p; p; s/C/c/p</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, iter 1</span></span>
<span class="line"><span style="color:#A6ACCD;">A b C </span><span style="color:#676E95;"># step 2, iter 2</span></span>
<span class="line"><span style="color:#A6ACCD;">A b c </span><span style="color:#676E95;"># step 2, iter 3</span></span>
<span class="line"></span></code></pre></div><h2 id="more-sed-actions" tabindex="-1">More <code>sed</code> Actions <a class="header-anchor" href="#more-sed-actions" aria-hidden="true">#</a></h2><h3 id="command-separators" tabindex="-1">Command separators <a class="header-anchor" href="#command-separators" aria-hidden="true">#</a></h3><p>Sed commands can be separated by either</p><ul><li>A semicolon</li><li>A newline character (if inside a <code>sed</code> script)</li><li>A <code>\</code> and a newline character? (Steve said it works in his C-shell, but not in my C-shell)</li></ul><p>Commands can be grouped with <code>{</code> and <code>}</code></p><h3 id="actions-that-direct-to-standard-output" tabindex="-1">Actions that direct to standard output <a class="header-anchor" href="#actions-that-direct-to-standard-output" aria-hidden="true">#</a></h3><table><thead><tr><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>p</td><td>Print the pattern space to STDOUT.</td></tr><tr><td>P</td><td>Print the pattern space to STDOUT, but only up to the first newline character.</td></tr><tr><td>=</td><td>Print the line number to STDOUT.</td></tr><tr><td>i</td><td>Following the i, the rest of the line is a string to insert (i.e., print) to the STDOUT.</td></tr><tr><td>a</td><td>Following the a, the rest of the line is a string. to append to STDOUT after the pattern space gets printed (which happens later).</td></tr><tr><td>c</td><td>Following the c, the rest of the line is a string to print to STDOUT. Afterwards, immediately, start a new cycle for the next line of input.</td></tr></tbody></table><h3 id="actions-that-update-the-pattern-space" tabindex="-1">Actions that update the pattern space <a class="header-anchor" href="#actions-that-update-the-pattern-space" aria-hidden="true">#</a></h3><table><thead><tr><th>Action</th><th>Description</th></tr></thead><tbody><tr><td>s</td><td>Substitute pattern with string.</td></tr><tr><td>z</td><td>“Zap” the pattern space (equivalent to: <code>s/.//g</code>).</td></tr><tr><td>y</td><td>Do a tr-like list-based substitution.</td></tr><tr><td>n</td><td>Replace pattern space with the next input line, after printing the old space (unless <code>-n</code>)</td></tr><tr><td>N</td><td>Append the next input line into the pattern space (with a newline inserted before it).</td></tr><tr><td>d</td><td>Delete the pattern space. Immediately start a new cycle for the next line of input.</td></tr><tr><td>D</td><td>If no newline in pattern space, perform a “d”. Otherwise, delete the pattern space up to first newline, and restart with the resultant pattern space, without reading new input.</td></tr></tbody></table><h3 id="compare-the-y-with-tr" tabindex="-1">Compare the <code>y</code> with <code>tr</code> <a class="header-anchor" href="#compare-the-y-with-tr" aria-hidden="true">#</a></h3><h4 id="tr" tabindex="-1"><code>tr</code> <a class="header-anchor" href="#tr" aria-hidden="true">#</a></h4><ul><li>Allows ranges <ul><li>e.g. <code>tr -d 0-9</code> ≡ <code>tr -d 013456789</code></li></ul></li><li>Allows paddings in the replacement (latter) string <ul><li>e.g. <code>tr 0-9 01</code> ≡ <code>tr 0-9 0111111111</code></li></ul></li><li>Ignores excrescent characters in the replacement string <ul><li>e.g. <code>tr 0-9 a-z</code> ≡ <code>tr 0-9 a-j</code></li></ul></li><li>Uses the last match in the replacement string <ul><li>e.g. <code>tr banana 123456</code> ≡ <code>tr bna 156</code></li></ul></li></ul><h4 id="sed-y" tabindex="-1"><code>sed y</code> <a class="header-anchor" href="#sed-y" aria-hidden="true">#</a></h4><ul><li>Disallows ranges</li><li>Requires the replacement string to have same size</li><li>Use the first match in the replacement string <ul><li>e.g. <code>sed y/banana/123456/</code> ≡ <code>sed y/ban/123</code></li></ul></li></ul><h4 id="examples-1" tabindex="-1">Examples <a class="header-anchor" href="#examples-1" aria-hidden="true">#</a></h4><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hi there</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr a-z A-Z</span></span>
<span class="line"><span style="color:#A6ACCD;">HI THERE</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hi there</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ</span></span>
<span class="line"><span style="color:#A6ACCD;">HI THERE</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hi there</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/a-z/A-Z/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">Hi there </span><span style="color:#676E95;"># a-z and A-Z are treated 3-word literal strings</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hi there</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">HI THERE</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr aeiou 12345</span></span>
<span class="line"><span style="color:#A6ACCD;">12345</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/aeiou/12345/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">12345</span></span>
<span class="line highlighted"><span style="color:#676E95;"># Same</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr aeiou 1-5</span></span>
<span class="line"><span style="color:#A6ACCD;">12345</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/aeiou/1-5/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">sed: -e expression </span><span style="color:#676E95;">#1, char 12: strings for `y&#39; command are different lengths</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/aei/1-5/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">1-5ou</span></span>
<span class="line highlighted"><span style="color:#676E95;"># While tr allows ranges, sed y treats it as literal string</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr aeiou 123</span></span>
<span class="line"><span style="color:#A6ACCD;">12333</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/aeiou/123/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">sed: -e expression </span><span style="color:#676E95;">#1, char 12: strings for `y&#39; command are different lengths</span></span>
<span class="line"><span style="color:#676E95;"># While tr pads the latter string, sed y disallows different length</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> tr aeiouiie 12345678</span></span>
<span class="line"><span style="color:#A6ACCD;">18745</span></span>
<span class="line"><span style="color:#A6ACCD;">% </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> aeiou </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sed </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">y/aeiouiie/12345678/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">12345</span></span>
<span class="line highlighted"><span style="color:#676E95;"># While tr takes the last match, sed y takes the first match</span></span>
<span class="line"></span></code></pre></div><h4 id="exercise-1" tabindex="-1">Exercise <a class="header-anchor" href="#exercise-1" aria-hidden="true">#</a></h4><p>Problem: Simplify the following <code>sed</code> command to the form with <code>/</code> as the separator</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sed </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">you understand now what it&#39;ll do</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Answer</p><p>What comes after the action is the separator, it&#39;s <code>o</code> in this case. So first, substitute it with <code>/</code></p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sed </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">y/u understand n/w what it&#39;ll d/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Next, remove duplcated matches. Keep the first match only. Also, remove matches that contain same characters.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">sed </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">y/undersa/what i&#39;/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Done. The simplest form is obtained. Now we can examine it.</p><div class="language-sh"><button class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#A6ACCD;">% cat F</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">% sed </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">you understand now what it&#39;ll do</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> F</span></span>
<span class="line"><span style="color:#A6ACCD;">ihow what ht</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">th?</span></span>
<span class="line highlighted"><span style="color:#C3E88D;">% sed &quot;y/undersa/what i</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> F</span></span>
<span class="line"><span style="color:#C3E88D;">ihow what ht&#39;th?</span></span>
<span class="line"></span></code></pre></div></div></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-f0af2311 data-v-a54a85bd><!----><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/course-notes/courses/cse365-unix-system-programming/lecture-5.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>Lecture 5</span></a></div><div class="has-prev pager" data-v-a54a85bd><a class="pager-link next" href="/course-notes/courses/cse365-unix-system-programming/midterm-review.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>Midtern Review</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"courses_cse350-computer-network_chapter-1.md\":\"9ce0cae1\",\"courses_cse350-computer-network_chapter-2.md\":\"b833c178\",\"courses_cse350-computer-network_index.md\":\"c1b9acaa\",\"courses_cse360-design-and-implementation-of-compiler_compiler-design.md\":\"4876027a\",\"courses_cse360-design-and-implementation-of-compiler_index.md\":\"11f29411\",\"courses_cse360-design-and-implementation-of-compiler_lexical-analysis_finite-automata.md\":\"0c1988dd\",\"courses_cse360-design-and-implementation-of-compiler_lexical-analysis_from-regular-expressions-to-automata.md\":\"ea236f38\",\"courses_cse360-design-and-implementation-of-compiler_lexical-analysis_optimization-of-dfa-based-pattern-matchers.md\":\"ad0401b6\",\"courses_cse360-design-and-implementation-of-compiler_syntax-analysis_context-free-grammars.md\":\"8fdf5832\",\"courses_cse360-design-and-implementation-of-compiler_syntax-analysis_top-down-parsing.md\":\"7cadde13\",\"courses_cse360-design-and-implementation-of-compiler_syntax-analysis_writing-a-grammar.md\":\"592e991a\",\"courses_cse365-unix-system-programming_index.md\":\"b9f28b3c\",\"courses_cse365-unix-system-programming_lecture-1.md\":\"1af3ef9b\",\"courses_cse365-unix-system-programming_lecture-2.md\":\"804df6ea\",\"courses_cse365-unix-system-programming_lecture-3.md\":\"e14dd02f\",\"courses_cse365-unix-system-programming_lecture-4.md\":\"efd4f9db\",\"courses_cse365-unix-system-programming_lecture-5.md\":\"5706fbe0\",\"courses_cse365-unix-system-programming_lecture-6.md\":\"c1316c1d\",\"courses_cse365-unix-system-programming_lecture-7.md\":\"51b1b653\",\"courses_cse365-unix-system-programming_lecture-9.md\":\"6db05010\",\"courses_cse365-unix-system-programming_midterm-review.md\":\"83ff3782\",\"courses_cse491-network-application-programming_assignments_hw1_hw1.md\":\"f0c49e8c\",\"courses_cse491-network-application-programming_chapter-1.md\":\"048ee211\",\"courses_cse491-network-application-programming_chapter-2.md\":\"d603fc3f\",\"courses_cse491-network-application-programming_chapter-3.md\":\"46dc3b55\",\"courses_cse491-network-application-programming_chapter-4.md\":\"5ff0a693\",\"courses_cse491-network-application-programming_chapter-5.md\":\"dd0befb8\",\"courses_cse491-network-application-programming_chapter-6.md\":\"ac20223c\",\"courses_cse491-network-application-programming_index.md\":\"f61efd2f\",\"index.md\":\"e0afe07f\"}")</script>
    <script type="module" async src="/course-notes/assets/app.b33521bb.js"></script>
    
  </body>
</html>