import{e as s}from"./app.bdc3a143.js";import{_ as n}from"./plugin-vue_export-helper.5a098b48.js";const a={},e=s(`<h1 id="lecture-4" tabindex="-1"><a class="header-anchor" href="#lecture-4" aria-hidden="true">#</a> Lecture 4</h1><h2 id="c-shell-control-flow" tabindex="-1"><a class="header-anchor" href="#c-shell-control-flow" aria-hidden="true">#</a> C-Shell Control Flow</h2><ul><li>if <ul><li>then, else, endif</li></ul></li><li>switch <ul><li>case, default, breaksw, end</li></ul></li><li>while <ul><li>continue, break, end</li></ul></li><li>foreach <ul><li>continue, break, end</li></ul></li></ul><h3 id="if-statement" tabindex="-1"><a class="header-anchor" href="#if-statement" aria-hidden="true">#</a> if statement</h3><h4 id="simple-format" tabindex="-1"><a class="header-anchor" href="#simple-format" aria-hidden="true">#</a> Simple format</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span> <span class="token punctuation">)</span> <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="full-format" tabindex="-1"><a class="header-anchor" href="#full-format" aria-hidden="true">#</a> Full format</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span> <span class="token punctuation">)</span> <span class="token keyword">then</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">&lt;</span>expression<span class="token operator">&gt;</span> <span class="token punctuation">)</span> <span class="token keyword">then</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
<span class="token keyword">else</span>
    <span class="token operator">&lt;</span>statement<span class="token operator">&gt;</span>
endif
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">Spaces</p><p>C-shell is super picky about spaces between words and symbles. The spaces in the example above is necessary. If you get an error message while developing, first try fixing it by <strong>adding spaces</strong></p></div><h4 id="csh-condition-test-operators" tabindex="-1"><a class="header-anchor" href="#csh-condition-test-operators" aria-hidden="true">#</a> Csh condition test operators</h4><table><tr><th>Symbol</th><th>Name</th><th>Description</th></tr><tr><td>!</td><td>Negate</td><td rowspan="4">Works just as they do in C conditionals</td></tr><tr><td>!=</td><td>Not equal</td></tr><tr><td>==</td><td>Equal</td></tr><tr><td>&gt;, &lt;, &lt;=, &gt;=</td><td>Relational</td></tr><tr><td>=~</td><td>Match to wildcard pattern</td><td>[variable] =~ [pattern]</td></tr><tr><td>!~</td><td>Not match to wildcard pattern</td><td>[variable] !~ [pattern]</td></tr></table><h4 id="csh-conditional-file-tests" tabindex="-1"><a class="header-anchor" href="#csh-conditional-file-tests" aria-hidden="true">#</a> Csh conditional file tests</h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> -d filename <span class="token punctuation">)</span> <span class="token comment"># true if filename is a directory</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -e filename <span class="token punctuation">)</span> <span class="token comment"># true if filename exists</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -f filename <span class="token punctuation">)</span> <span class="token comment"># true if filename is a plain file</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -o filename <span class="token punctuation">)</span> <span class="token comment"># true if you own the file</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -r filename <span class="token punctuation">)</span> <span class="token comment"># true if filename is readable</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -w filename <span class="token punctuation">)</span> <span class="token comment"># true if filename is writable</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -x filename <span class="token punctuation">)</span> <span class="token comment"># true if filename is executalbe</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> -z filename <span class="token punctuation">)</span> <span class="token comment"># true if filename is empty</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">Examing Flags From Arguments</p><p>Suppose you want to write a script that accepts a <code>-r</code> option as an script arguments. The following won&#39;t work.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token variable">$1</span> <span class="token operator">==</span> -r <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;The -r flag was given&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>If <code>$1</code> is indeed <code>-r</code>, after the substitution, it would become</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>% <span class="token keyword">if</span> <span class="token punctuation">(</span> -r <span class="token operator">==</span> -r <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;The -r flag was given&quot;</span>
if: Missing <span class="token function">file</span> name.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>which examine if the file <code>==</code> is readable and a trailing <code>-r</code> causing the error.</p></div><div class="custom-container tip"><p class="custom-container-title">Adding a dummy prefix</p><p>The best you can do is to add a dummy prefix, for example</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> d<span class="token variable">$1</span> <span class="token operator">==</span> d-r <span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;The -r flag was given&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></div><h3 id="while-loop" tabindex="-1"><a class="header-anchor" href="#while-loop" aria-hidden="true">#</a> while loop</h3><h4 id="emulating-for-loop-with-while" tabindex="-1"><a class="header-anchor" href="#emulating-for-loop-with-while" aria-hidden="true">#</a> Emulating for loop with <code>while</code></h4><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/tcsh</span>
@ i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $i <span class="token punctuation">\\</span><span class="token operator">&lt;</span> <span class="token number">3</span><span class="token variable">\`</span></span> <span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> -n <span class="token variable">$i</span>
    @ i++
end
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><details class="custom-container details"><summary>Output</summary><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></details><h3 id="foreach" tabindex="-1"><a class="header-anchor" href="#foreach" aria-hidden="true">#</a> foreach</h3><p>Dive into an example</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/tcsh</span>
foreach person <span class="token punctuation">(</span>Bob Susan Nico<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> Hello <span class="token variable">$person</span>
end
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><details class="custom-container details"><summary>Output</summary><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>Hello Bob
Hello Susan
Hello Nico
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></details><div class="custom-container tip"><p class="custom-container-title">Still A Better For Loop</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/tcsh</span>
foreach i <span class="token punctuation">(</span><span class="token variable"><span class="token variable">\`</span><span class="token function">seq</span> <span class="token number">10</span> <span class="token number">10</span> <span class="token number">100</span><span class="token variable">\`</span></span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$i</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">expr</span> $i + <span class="token number">1</span><span class="token variable">\`</span></span>
end
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><details class="custom-container details"><summary>Output</summary><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token number">10</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">11</span>
<span class="token number">20</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">21</span>
<span class="token number">30</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">31</span>
<span class="token number">40</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">41</span>
<span class="token number">50</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">51</span>
<span class="token number">60</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">61</span>
<span class="token number">70</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">71</span>
<span class="token number">80</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">81</span>
<span class="token number">90</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">91</span>
<span class="token number">100</span> + <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">101</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details></div><h2 id="a-delete-script" tabindex="-1"><a class="header-anchor" href="#a-delete-script" aria-hidden="true">#</a> A Delete Script</h2><p>Let&#39;s write a scrtpt!</p><h3 id="list-of-functionalities" tabindex="-1"><a class="header-anchor" href="#list-of-functionalities" aria-hidden="true">#</a> List of functionalities</h3><p>For each command-line argument</p><ol><li>Ask about whether it should be deleted.</li><li>Read the user&#39;s response from stdin.</li><li>Perform the action indicated by the user&#39;s response.</li></ol><h3 id="source-code" tabindex="-1"><a class="header-anchor" href="#source-code" aria-hidden="true">#</a> Source code</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/tcsh</span>
foreach name <span class="token punctuation">(</span><span class="token variable">$argv</span><span class="token punctuation">)</span> <span class="token comment"># loop through arguments</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> -f <span class="token variable">$name</span> <span class="token punctuation">)</span> <span class="token keyword">then</span> <span class="token comment"># test if it is a file</span>
        <span class="token builtin class-name">echo</span> -n <span class="token string">&quot;delete the file <span class="token variable">$name</span> (y/n/q)? &quot;</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> -n <span class="token string">&quot;delete the entire directory&quot;</span><span class="token punctuation">\\</span>
                <span class="token string">&quot;<span class="token variable">$name</span> (y/n/q)? &quot;</span>
    endif
    <span class="token builtin class-name">set</span> ans <span class="token operator">=</span> $<span class="token operator">&lt;</span> <span class="token comment"># This symbol indicates to take input from keyboard</span>
    switch <span class="token punctuation">(</span> <span class="token variable">$ans</span> <span class="token punctuation">)</span>
        <span class="token keyword">case</span> n:
            <span class="token builtin class-name">continue</span>
        <span class="token keyword">case</span> q:
            <span class="token builtin class-name">exit</span> <span class="token comment"># no args means $? will be 0</span>
        <span class="token keyword">case</span> y:
            <span class="token function">rm</span> -rf <span class="token variable">$name</span>
    endsw
end
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="quote" tabindex="-1"><a class="header-anchor" href="#quote" aria-hidden="true">#</a> Quote</h2><p>So far, we&#39;ve seen many special symbols that have their own special meanings, such as <code>|</code> is for pipelining, <code>$</code> is for variables, etc.. However, what if we want those symbols literally, i.e. the plaintext, no special meaning. Then we <strong>quote</strong> them.</p><p>There&#39;re three quoting symbols</p><table><thead><tr><th>Symbol</th><th>Description</th></tr></thead><tbody><tr><td><code>\\</code></td><td>Single charater quote</td></tr><tr><td><code>&#39;</code></td><td>Strong quotes</td></tr><tr><td><code>&quot;</code></td><td>Weak quotes</td></tr></tbody></table><h3 id="strong-quote" tabindex="-1"><a class="header-anchor" href="#strong-quote" aria-hidden="true">#</a> Strong quote</h3><p>Stong quote <code>&#39;</code>. What do you mean by strong? If it&#39;s strong, it can turn other special symbols into plaintexts. If a special symbol is <strong>stronger</strong> then it, such as <code>![prefix]</code>, then it cannot suppress the symbol</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>% <span class="token builtin class-name">echo</span> <span class="token string">&#39;Hi! Hi!&#39;</span>
Hi<span class="token operator">!</span> Hi<span class="token operator">!</span>
% <span class="token builtin class-name">echo</span> <span class="token string">&#39;Hi!Hi!&#39;</span>
Hi<span class="token operator">!</span>: Event not found.
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line">\xA0</div></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>On the line 4, the <code>!</code> thought <code>Hi!</code> was a prefix of a previous command, but obviously, we don&#39;t have commnads with prefix of <code>Hi!</code>.</p><h3 id="weak-quote" tabindex="-1"><a class="header-anchor" href="#weak-quote" aria-hidden="true">#</a> Weak quote</h3><p>Weak quote <code>&quot;</code>. Allow dollar sign <code>$</code> and backtick execution <code>\`[command]\`</code> to expand inside two quotes. i.e. it&#39;s not strong enough to supress these two special symbols.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>% <span class="token builtin class-name">echo</span> <span class="token string">&quot;Is the executable under <span class="token environment constant">$PATH</span>?&quot;</span>
Is the executable under /usr/local/opt/tcl-tk/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/Library/TeX/texbin:/Library/Apple/usr/bin?
% <span class="token builtin class-name">echo</span> <span class="token string">&quot;My current directory is <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">pwd</span><span class="token variable">\`</span></span>&quot;</span>
My current directory is /Users/ernestchu
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">Strength</p><p><strong><code>\\</code> &gt; <code>&#39;</code> &gt; <code>&quot;</code></strong></p><ul><li><code>\\</code> supresses <code>!</code> (history expansion) and all other commands, even EOL can be quoted. That&#39;s why we can add <code>\\</code> at the end of lines to have multi-line commands.</li><li><code>&#39;</code> as <em>weaker</em> quotes, cannot supresses <code>!</code></li><li><code>&quot;</code> as even weaker quotes, cannot surpress <code>!</code>, <code>$</code> and backticks <code>\`\`</code></li></ul></div><div class="custom-container danger"><p class="custom-container-title">Quotes Within Quotes</p><p>The strength is based on what commands do they surpress. But it doesn&#39;t mean <code>\\</code> surpresses <code>&#39;</code> or <code>&#39;</code> surpresses <code>&quot;</code>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>% echo &quot;&#39;&quot;
&#39;
% echo &#39;&quot;&#39;
&quot;
% echo &#39;\\&#39;&quot;\\&quot;
\\\\
% echo \\&#39;\\\\\\&quot;
&#39;\\&quot;
% echo &#39;&#39;&#39;
Unmatched &#39;&#39;&#39;.
% echo &quot;&quot;&quot;
Unmatched &quot;&quot;&quot;.
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Interestingly, the only quote that can quote itself is <code>\\</code>. Neither <code>&#39;</code> nor <code>&quot;</code> can quote themselves. Why? We&#39;ll see below</p></div><p>The shell parsed commands from left to right</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token string">&#39;I am in the stong quote interpretation rule.&#39;</span>
\u2191                                            \u2191
\u2502                                  turn off \u2500\u2518
\u2514\u2500 turn on strong quote interpretation
</code></pre><div class="highlight-lines"><div class="highlight-line">\xA0</div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>So actually, quotes doesn&#39;t generate string, they just change the way a shell interpretates commands.</p><p>Once it entered the <strong>zone</strong> by hitting <code>&#39;</code>, the shell turn on plaintext interpretation until it hits next <code>&#39;</code>. (Yet except <code>!</code>)</p><h3 id="exercise" tabindex="-1"><a class="header-anchor" href="#exercise" aria-hidden="true">#</a> Exercise</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>% echo &#39;This doesn\\&#39;t work&#39;
Unmatched &#39;&#39;&#39;.
% echo &#39;Turn off the &quot;strong quote interpretation&quot; first, then it&#39;\\&#39;&#39;ll work!&#39;
Turn off the &quot;strong quote interpretation&quot; first, then it&#39;ll work!
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="backslash-es" tabindex="-1"><a class="header-anchor" href="#backslash-es" aria-hidden="true">#</a> Backslash&#39;es&#39;</h2><p>How does <code>echo</code> interpret the <code>\\</code> symbol?</p><h3 id="can-we-use-the-escape-sequences-inside-quotes" tabindex="-1"><a class="header-anchor" href="#can-we-use-the-escape-sequences-inside-quotes" aria-hidden="true">#</a> Can we use the escape sequences inside quotes?</h3><p>It&#39;s really depends on the shell</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># In tcsh on Steve&#39;s computer</span>
% <span class="token builtin class-name">echo</span> <span class="token string">&#39;a\\tb\\\\&#39;</span>
a   b<span class="token punctuation">\\</span>
<span class="token comment"># In tcsh on my MacBook</span>
% <span class="token builtin class-name">echo</span> <span class="token string">&#39;a\\tb\\\\&#39;</span>
a<span class="token punctuation">\\</span>tb<span class="token punctuation">\\</span><span class="token punctuation">\\</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>We&#39;d better follow Steve&#39;s computer...</p><h3 id="from-1-to-n-backslashes" tabindex="-1"><a class="header-anchor" href="#from-1-to-n-backslashes" aria-hidden="true">#</a> From 1 to n backslashes</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span> <span class="token comment"># 1</span>
? 
<span class="token comment"># this is not an output, it&#39;s an indicator telling you </span>
<span class="token comment"># that the command hasn&#39;t finished, because EOL was suprressed</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># 2</span>
<span class="token punctuation">\\</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># 3</span>
? <span class="token comment"># same as line 2</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># 4</span>
<span class="token punctuation">\\</span>
<span class="token comment"># csh substitute \\\\\\\\ with \\\\. However, when \\\\ is sent into echo</span>
<span class="token comment"># as an argument, echo has it&#39;s own substitution again, thus /</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># 5</span>
? <span class="token comment"># same as line 2, so we know odd number of \\ would all get this</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># 8</span>
<span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># echo receives \\\\\\\\, hence substitute with \\\\ internally</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># 16</span>
<span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># echo receives \\\\\\\\\\\\\\\\.</span>
% <span class="token builtin class-name">echo</span> <span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token builtin class-name">echo</span>
<span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># been through two internal substitutions of echo</span>
% <span class="token builtin class-name">echo</span> <span class="token string">&#39;\\\\\\\\\\\\\\\\&#39;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token builtin class-name">echo</span>
<span class="token punctuation">\\</span><span class="token punctuation">\\</span> <span class="token comment"># quoted, hence \\\\\\\\\\\\\\\\ -&gt; \\\\\\\\ -&gt; \\\\</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">xargs Do Not Substitute</p><p>We&#39;ve said <code>echo</code> does it own expansion, what about <code>xargs</code>? Does the <code>\\\\</code> in <code>xargs echo \\\\</code> become <code>\\</code> before send into <code>echo</code>? The anwser is negative. Let&#39;s look at an example on wildcard expansion</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>% <span class="token function">ls</span> ?
A B
% <span class="token builtin class-name">echo</span> ? <span class="token string">&#39;?&#39;</span>
A B ?
% <span class="token builtin class-name">echo</span> ? <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token builtin class-name">echo</span>
A B <span class="token comment"># A B were sent to xargs echo, so it makes sense</span>
% <span class="token builtin class-name">echo</span> <span class="token string">&#39;?&#39;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token builtin class-name">echo</span>
? <span class="token comment"># ? was sent to xargs echo, and xargs don&#39;t do the expansion</span>
% <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">echo</span> <span class="token string">&#39;?&#39;</span><span class="token variable">\`</span></span>
A B 
<span class="token comment"># while backticks simply substitute echo &#39;?&#39; with ? (without quotes).</span>
<span class="token comment"># so it becomes echo ?</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div><h2 id="debugging" tabindex="-1"><a class="header-anchor" href="#debugging" aria-hidden="true">#</a> Debugging</h2><p>Not sure if you quote correctly? Especially when you writing a script. Well, Unix provides a great tool to help you out!</p><ul><li><code>set echo</code> print every command executed <strong>after</strong> the subsitution</li><li><code>set verbose</code> print every command executed <strong>before</strong> the substution</li></ul><p>And you can <code>unset</code> them if you want to turn off the behavior.</p>`,63);function t(p,o){return e}var i=n(a,[["render",t]]);export{i as default};
